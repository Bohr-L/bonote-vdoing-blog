---
title:  SpringBoot 自动装配的原理
date: 2025-12-28 22:05:45
permalink: /pages/interview/SpringBoot/auto/
categories:
  - 常见面试题
  - Spring 生态类
tags:
  - 
---
SpringBoot 自动装配的核心是 **“约定优于配置”**，通过注解和 SPI（服务提供者接口）机制，自动完成 Bean 的注册和配置，无需手动编写 XML 或`@Bean`注解，原理分 3 步：

- **1. 启动类注解触发自动装配**：启动类上的`@SpringBootApplication`是复合注解，其中`@EnableAutoConfiguration`是自动装配的 “开关”。
- **2. `@EnableAutoConfiguration`的作用**：
    - 该注解导入`AutoConfigurationImportSelector`类，其核心方法`selectImports()`会扫描 META-INF/spring.factories 文件（SpringBoot starter 包和自定义 starter 中均包含此文件）。
    - `spring.factories`文件中配置了大量 “自动配置类”（如`HttpEncodingAutoConfiguration`、`DataSourceAutoConfiguration`），这些类对应不同场景的默认配置。
- **3. 自动配置类生效逻辑**：
    - 每个自动配置类（如`DataSourceAutoConfiguration`）都有`@Conditional`系列注解（如`@ConditionalOnClass`：判断类路径是否有指定类，如`DataSource`；`@ConditionalOnMissingBean`：判断容器中是否没有指定 Bean）。
    - 若满足`@Conditional`条件，自动配置类会向容器中注册默认 Bean（如`DataSource`），并加载默认配置（如从 application.properties 中读取`spring.datasource.url`等参数）。

**示例**：当引入`spring-boot-starter-web`依赖时，`spring.factories`中的`DispatcherServletAutoConfiguration`会生效（因类路径有`DispatcherServlet`），自动向容器注册`DispatcherServlet`（SpringMVC 核心），无需手动配置。

### 